<!DOCTYPE html>
<html lang="en" x-data="dashboard()" :data-theme="darkMode ? 'dark' : 'light'">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CTFd Admin Dashboard</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Google Font: Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }

    :root {
      --bg1: #f9fafb;
      --bg2: #ffffff;
      --bg3: #f1f5f9;
      --text: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --hover: #f3f4f6;
      --accent: #7cb518;
    }

    [data-theme="dark"] {
      --bg1: #0f172a;
      --bg2: #1e293b;
      --bg3: #334155;
      --text: #e2e8f0;
      --text-muted: #94a3b8;
      --border: #334155;
      --hover: #273549;
      --accent: #9fef00;
    }

    body {
      background-color: var(--bg1);
      color: var(--text);
    }

    .card {
      background-color: var(--bg2);
      border: 1px solid var(--border);
    }

    .hover-bg:hover {
      background-color: var(--hover);
    }

    .text-muted {
      color: var(--text-muted);
    }
  </style>
</head>

<body class="min-h-screen" x-init="initTheme()">
  <!-- Sidebar + Main Content Wrapper -->
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-[var(--bg2)] border-r border-[var(--border)] hidden md:block">
      <div class="p-5 font-bold text-xl flex items-center gap-2 border-b border-[var(--border)]">
        <i class="bi bi-rocket-fill text-[var(--accent)]"></i>
        <span>CTFd Admin</span>
      </div>

      <nav class="px-4 py-4 space-y-1 text-sm">
        <a href="#" class="flex items-center gap-2 p-2 rounded hover-bg">
          <i class="bi bi-speedometer2"></i> Dashboard
        </a>

        <a href="#" class="flex items-center gap-2 p-2 rounded hover-bg">
          <i class="bi bi-people"></i> Users
        </a>

        <a href="#" class="flex items-center gap-2 p-2 rounded hover-bg">
          <i class="bi bi-flag"></i> Teams
        </a>

        <a href="#" class="flex items-center gap-2 p-2 rounded hover-bg">
          <i class="bi bi-envelope"></i> Messages
        </a>

        <!-- Collapsible Section -->
        <div x-data="{ open: false }" class="mt-2">
          <button @click="open = !open" class="flex items-center w-full gap-2 p-2 rounded hover-bg">
            <i class="bi bi-gear"></i>
            <span>Management</span>
            <i :class="open ? 'bi bi-chevron-up ml-auto' : 'bi bi-chevron-down ml-auto'"></i>
          </button>
          <div x-show="open" x-collapse class="pl-6 mt-1 space-y-1">
            <a href="#" class="block p-2 rounded hover-bg">Settings</a>
            <a href="#" class="block p-2 rounded hover-bg">Roles</a>
            <a href="#" class="block p-2 rounded hover-bg">Permissions</a>
          </div>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <!-- Topbar -->
      <header class="sticky top-0 z-10 bg-[var(--bg2)] border-b border-[var(--border)] px-4 py-3 flex justify-between items-center">
        <div class="flex items-center gap-2 md:hidden">
          <button @click="sidebarOpen = !sidebarOpen" class="text-xl">
            <i class="bi bi-list"></i>
          </button>
          <span class="font-bold text-lg">CTFd Admin</span>
        </div>

        <div class="flex items-center gap-4">
          <!-- Theme Toggle -->
          <button @click="toggleTheme()" class="text-xl">
            <i :class="darkMode ? 'bi bi-sun' : 'bi bi-moon'"></i>
          </button>

          <!-- Avatar Dropdown -->
          <div class="relative" x-data="{ open: false }" @click.outside="open = false">
            <button @click="open = !open" class="rounded-full size-9 overflow-hidden border-2 border-[var(--accent)]">
              <img src="https://avatar.iran.liara.run/public" class="w-full h-full object-cover" alt="User Avatar" />
            </button>
            <div x-show="open" x-transition
              class="absolute right-0 mt-2 w-40 bg-[var(--bg2)] border border-[var(--border)] rounded shadow z-50">
              <a href="#" class="block px-4 py-2 hover-bg text-sm">Settings</a>
              <a href="#" class="block px-4 py-2 hover-bg text-sm">Logout</a>
            </div>
          </div>
        </div>
      </header>

      <!-- Dashboard Content -->
      <main class="p-6 space-y-6">
        <div class="grid md:grid-cols-3 gap-6">
          <div class="card p-5 rounded shadow">
            <h2 class="text-lg font-semibold mb-1">Users</h2>
            <p class="text-muted text-sm">Manage all users</p>
          </div>
          <div class="card p-5 rounded shadow">
            <h2 class="text-lg font-semibold mb-1">Challenges</h2>
            <p class="text-muted text-sm">Track and review challenges</p>
          </div>
          <div class="card p-5 rounded shadow">
            <h2 class="text-lg font-semibold mb-1">Notifications</h2>
            <p class="text-muted text-sm">Send platform updates</p>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Alpine Component Logic -->
  <script>
    function dashboard() {
      return {
        darkMode: true,
        sidebarOpen: false,

        toggleTheme() {
          this.darkMode = !this.darkMode;
          localStorage.setItem("theme", this.darkMode ? "dark" : "light");
        },

        initTheme() {
          const stored = localStorage.getItem("theme");
          this.darkMode = stored === "dark" || stored === null;
        }
      }
    }
  </script>
</body>

</html>
