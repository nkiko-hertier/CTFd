{% extends "base.html" %}

{% block content %}
  <!-- Modern registration form with Tabler styling -->
  <div class="page page-center">
    <div class="container container-tight py-4">
      <div class="text-center mb-4">
        {% if Configs.ctf_logo %}
          <img src="{{ Configs.ctf_logo }}" height="64" alt="{{ Configs.ctf_name }}" class="mb-3">
        {% endif %}
        <h1 class="h2 text-muted">{% trans %}Create new account{% endtrans %}</h1>
      </div>
      
      <div class="card card-md">
        <div class="card-body">
          {% include "components/errors.html" %}

          {% if integrations.mlc() %}
            <div class="mb-3">
              <a class="btn btn-outline-primary w-100" href="{{ url_for('auth.oauth_login') }}">
                <svg class="icon me-2" width="24" height="24">
                  <use href="#tabler-brand-oauth"></use>
                </svg>
                Register with Major League Cyber
              </a>
            </div>
            <div class="hr-text">or</div>
          {% endif %}

          {% with form = Forms.auth.RegistrationForm() %}
            {% from "macros/forms.html" import render_extra_fields %}

            <form method="post" accept-charset="utf-8" role="form">
              <div class="mb-3">
                <label class="form-label required">{{ form.name.label.text }}</label>
                {{ form.name(class="form-control", value=name, autocomplete="username", placeholder="Enter your username") }}
                <small class="form-hint">{% trans %}Your username on the site{% endtrans %}</small>
              </div>

              <div class="mb-3">
                <label class="form-label required">{{ form.email.label.text }}</label>
                {{ form.email(class="form-control", value=email, autocomplete="email", placeholder="Enter your email") }}
                <small class="form-hint">{% trans %}Never shown to the public{% endtrans %}</small>
              </div>

              <div class="mb-3">
                <label class="form-label required">{{ form.password.label.text }}</label>
                {{ form.password(class="form-control", value=password, autocomplete="new-password", placeholder="Create a password") }}
                <small class="form-hint">{% trans %}Password used to log into your account{% endtrans %}</small>
              </div>

              {{ form.nonce() }}

              {{ render_extra_fields(form.extra) }}

              {% if Configs.tos_or_privacy %}
                <div class="mb-3">
                  <label class="form-check">
                    <input class="form-check-input" type="checkbox" required>
                    <span class="form-check-label">
                      {% trans trimmed privacy_link=Configs.privacy_link, tos_link=Configs.tos_link %}
                      I agree to the <a href="{{ privacy_link }}" target="_blank" class="link-primary">privacy policy</a>
                      and <a href="{{ tos_link }}" target="_blank" class="link-primary">terms of service</a>
                      {% endtrans %}
                    </span>
                  </label>
                </div>
              {% endif %}

              <div class="form-footer">
                {{ form.submit(class="btn btn-primary w-100") }}
              </div>
            </form>
          {% endwith %}
        </div>
      </div>
      
      <div class="text-center text-muted mt-3">
        {% trans %}Already have account?{% endtrans %} 
        <a href="{{ url_for('auth.login') }}" tabindex="-1">{% trans %}Sign in{% endtrans %}</a>
      </div>
    </div>
  </div>
{% endblock %}
